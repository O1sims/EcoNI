/**
 * UI-Router Deep State Redirect: redirect to the most recently activated child state
 * @version v1.0.3
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@uirouter/core")):"function"==typeof define&&define.amd?define(["exports","@uirouter/core"],e):e(t["@uirouter/dsr"]={},t["@uirouter/core"])}(this,function(t,e){"use strict";var r=function(){function t(t){var e=this;this.name="deep-state-redirect",this.hookDeregFns=[],this.$transitions=t.transitionService,this.$state=t.stateService,this.hookDeregFns.push(this.$transitions.onRetain({retained:function(t){return!!e.getDsrProp(t.self)}},this.recordDeepState.bind(this))),this.hookDeregFns.push(this.$transitions.onEnter({entering:function(t){return!!e.getDsrProp(t.self)}},this.recordDeepState.bind(this))),this.hookDeregFns.push(this.$transitions.onBefore({to:function(t){return!!e.getDsrProp(t.self)}},this.deepStateRedirect.bind(this)))}return t.prototype.dispose=function(t){this.hookDeregFns.forEach(function(t){return t()})},t.prototype.reset=function(t,e){var r=this.$state;if(t)if(e){var i=r.get(t).$$state();i.$dsr=i.$dsr.filter(this.paramsEqual(i,e,void 0,!0))}else delete r.get(t).$$state().$dsr;else r.get().forEach(function(t){return delete t.$$state().$dsr})},t.prototype.getRedirect=function(t,e){return this.getDeepStateRedirect(t,e)},t.prototype.getDsrProp=function(t){return t.deepStateRedirect||t.dsr},t.prototype.getConfig=function(t){var e=this.$state,r=this.getDsrProp(t);if(void 0!==r){var i,s="string"==typeof r?e.target(r):void 0,o="function"==typeof r?r:void 0;if("object"==typeof r){o=r.fn,"object"==typeof r.default?s=e.target(r.default.state,r.default.params,r.default.options):"string"==typeof r.default&&(s=e.target(r.default));var n=r.params;!0===n?i=function(){return!0}:Array.isArray(n)&&(i=function(t){return-1!==n.indexOf(t.id)})}return{default:s,params:i,fn:o=o||function(t,e){return e}}}},t.prototype.paramsEqual=function(t,r,i,s){void 0===i&&(i=function(){return!0}),void 0===s&&(s=!1);var o=t.parameters({inherit:!0}).filter(i);return function(t){var i=e.Param.equals(o,t.triggerParams,r);return s?!i:i}},t.prototype.recordDeepState=function(t,e){var r=this,i=this.$state,s=this.getConfig(e).params,o=e.$$state();t.promise.then(function(){var e=t.to(),n=t.params(),a=i.target(e,n);if(s){var u=o.$dsr||[],f=r.paramsEqual(e.$$state(),n,void 0,!0);o.$dsr=u.filter(f),o.$dsr.push({triggerParams:n,target:a})}else o.$dsr=a})},t.prototype.deepStateRedirect=function(t){var e=t.options();if(!(e.ignoreDsr||e.custom&&e.custom.ignoreDsr)){var r=this.getConfig(t.to()),i=this.getDeepStateRedirect(t.to(),t.params());if(!(i=r.fn(t,i))||i.state()!==t.to())return i}},t.prototype.getDeepStateRedirect=function(t,e){var r,i=this.$state,s=i.get(t),o=s&&s.$$state(),n=this.getConfig(s);if(n.params){var a=this.paramsEqual(o,e,n.params,!1),u=o.$dsr&&o.$dsr.filter(a)[0];r=u&&u.target}else r=o.$dsr;if(r=r||n.default){var f=Object.assign({},e,r.params());r=i.target(r.state(),f,r.options())}return r},t}();t.DSRPlugin=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ui-router-dsr.min.js.map
